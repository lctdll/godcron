/*! 
 Build based on gin-vue-admin 
 Time : 1718874130000 */
import{a as e,r as a,ad as t,o as l,c as r,b as s,d as i,w as o,g as n,O as d,e as u,h as p,q as c,t as m,G as v,at as g,au as C,j as B,J as f,E as A,l as y}from"./087AC4D233B64EB0index.f7794d3b.js";import{E}from"./087AC4D233B64EB0drawer.178042b4.js";import"./087AC4D233B64EB0overlay.ee491930.js";/* empty css                              */import{E as b}from"./087AC4D233B64EB0pagination.4f4dab9f.js";/* empty css                            */import"./087AC4D233B64EB0select.ac4ece9f.js";import"./087AC4D233B64EB0scrollbar.5ea68434.js";/* empty css                               */import{E as D,a as j}from"./087AC4D233B64EB0table-column.ebf38335.js";import"./087AC4D233B64EB0checkbox.689d67cf.js";/* empty css                                */import{a as _,E as h}from"./087AC4D233B64EB0form-item.2294f669.js";/* empty css                               */import{E as w}from"./087AC4D233B64EB0date-picker.0dc779b1.js";import{g as k,a as x,f as T,b as V,c as z,u as I}from"./087AC4D233B64EB0manger.bc2b6569.js";import{E as S}from"./087AC4D233B64EB0index.180a68c4.js";import"./087AC4D233B64EB0isEqual.e4d5ab49.js";import"./087AC4D233B64EB0_Uint8Array.a14e9c36.js";import"./087AC4D233B64EB0index.18ebb74e.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.13f65845.js";import"./087AC4D233B64EB0debounce.9b1e718d.js";import"./087AC4D233B64EB0_baseIteratee.ecc9a1d9.js";import"./087AC4D233B64EB0index.21f2f826.js";import"./087AC4D233B64EB0castArray.b2df96d4.js";import"./087AC4D233B64EB0_initCloneObject.6c0ecbc8.js";import"./087AC4D233B64EB0_baseClone.3d27a61c.js";import"./087AC4D233B64EB0arrays.2c626d3b.js";import"./087AC4D233B64EB0index.50b81e49.js";const U={class:"gva-search-box"},F={class:"gva-table-box"},q={class:"gva-btn-list"},O={class:"gva-pagination"},R={class:"flex justify-between items-center"},G={class:"text-lg"},J=Object.assign({name:"AgentTable"},{__name:"manger",setup(J){const K=e(!1),L=e({agent_addr:""}),M=a({agent_addr:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}]}),Q=a({createdAt:[{validator:(e,a,t)=>{X.value.startCreatedAt&&!X.value.endCreatedAt?t(new Error("请填写结束日期")):!X.value.startCreatedAt&&X.value.endCreatedAt?t(new Error("请填写开始日期")):X.value.startCreatedAt&&X.value.endCreatedAt&&(X.value.startCreatedAt.getTime()===X.value.endCreatedAt.getTime()||X.value.startCreatedAt.getTime()>X.value.endCreatedAt.getTime())?t(new Error("开始日期应当早于结束日期")):t()},trigger:"change"}]}),Y=e(),$=e(),H=e(1),N=e(0),P=e(10),W=e([]),X=e({}),Z=()=>{X.value={},le()},ee=()=>{var e;null==(e=$.value)||e.validate((async e=>{e&&(H.value=1,P.value=10,le())}))},ae=e=>{P.value=e,le()},te=e=>{H.value=e,le()},le=async()=>{const e=await k({page:H.value,pageSize:P.value,...X.value});0===e.code&&(W.value=e.data.list,N.value=e.data.total,H.value=e.data.page,P.value=e.data.pageSize)};le();(async()=>{})();const re=e([]),se=e=>{re.value=e},ie=async()=>{C.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=[];if(0===re.value.length)return void B({type:"warning",message:"请选择要删除的数据"});re.value&&re.value.map((a=>{e.push(a.ID)}));0===(await x({IDs:e})).code&&(B({type:"success",message:"删除成功"}),W.value.length===e.length&&H.value>1&&H.value--,le())}))},oe=e(""),ne=async e=>{0===(await V({ID:e.ID})).code&&(B({type:"success",message:"删除成功"}),1===W.value.length&&H.value>1&&H.value--,le())},de=e(!1),ue=()=>{oe.value="create",de.value=!0},pe=()=>{de.value=!1,L.value={agent_addr:""}},ce=async()=>{var e;null==(e=Y.value)||e.validate((async e=>{if(!e)return;let a;switch(oe.value){case"create":default:a=await z(L.value);break;case"update":a=await I(L.value)}0===a.code&&(B({type:"success",message:"创建/更改成功"}),pe(),le())}))};return(e,a)=>{const B=t("QuestionFilled"),k=f,x=S,V=w,z=_,I=A,J=h,le=D,me=j,ve=b,ge=y,Ce=E;return l(),r("div",null,[s("div",U,[i(J,{ref_key:"elSearchFormRef",ref:$,inline:!0,model:X.value,class:"demo-form-inline",rules:Q,onKeyup:c(ee,["enter"])},{default:o((()=>[i(z,{label:"创建日期",prop:"createdAt"},{label:o((()=>[s("span",null,[n(" 创建日期 "),i(x,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:o((()=>[i(k,null,{default:o((()=>[i(B)])),_:1})])),_:1})])])),default:o((()=>[i(V,{modelValue:X.value.startCreatedAt,"onUpdate:modelValue":a[0]||(a[0]=e=>X.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!X.value.endCreatedAt&&e.getTime()>X.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),n(" — "),i(V,{modelValue:X.value.endCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>X.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!X.value.startCreatedAt&&e.getTime()<X.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),K.value?(l(),r(d,{key:0},[],64)):u("",!0),i(z,null,{default:o((()=>[i(I,{type:"primary",icon:"search",onClick:ee},{default:o((()=>[n("查询")])),_:1}),i(I,{icon:"refresh",onClick:Z},{default:o((()=>[n("重置")])),_:1}),K.value?(l(),p(I,{key:1,link:"",type:"primary",icon:"arrow-up",onClick:a[3]||(a[3]=e=>K.value=!1)},{default:o((()=>[n("收起")])),_:1})):(l(),p(I,{key:0,link:"",type:"primary",icon:"arrow-down",onClick:a[2]||(a[2]=e=>K.value=!0)},{default:o((()=>[n("展开")])),_:1}))])),_:1})])),_:1},8,["model","rules"])]),s("div",F,[s("div",q,[i(I,{type:"primary",icon:"plus",onClick:ue},{default:o((()=>[n("新增")])),_:1}),i(I,{icon:"delete",style:{"margin-left":"10px"},disabled:!re.value.length,onClick:ie},{default:o((()=>[n("删除")])),_:1},8,["disabled"])]),i(me,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:W.value,"row-key":"ID",onSelectionChange:se},{default:o((()=>[i(le,{type:"selection",width:"55"}),i(le,{align:"left",label:"日期",prop:"createdAt",width:"180"},{default:o((e=>[n(m(v(g)(e.row.CreatedAt)),1)])),_:1}),i(le,{align:"left",label:"地址",prop:"agent_addr",width:"120"}),i(le,{align:"left",label:"操作",fixed:"right","min-width":"240"},{default:o((e=>[i(I,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await T({ID:e.ID});oe.value="update",0===a.code&&(L.value=a.data,de.value=!0)})(e.row)},{default:o((()=>[n("变更")])),_:2},1032,["onClick"]),i(I,{type:"primary",link:"",icon:"delete",onClick:a=>{return t=e.row,void C.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ne(t)}));var t}},{default:o((()=>[n("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("div",O,[i(ve,{layout:"total, sizes, prev, pager, next, jumper","current-page":H.value,"page-size":P.value,"page-sizes":[10,30,50,100],total:N.value,onCurrentChange:te,onSizeChange:ae},null,8,["current-page","page-size","total"])])]),i(Ce,{"destroy-on-close":"",size:"800",modelValue:de.value,"onUpdate:modelValue":a[5]||(a[5]=e=>de.value=e),"show-close":!1,"before-close":pe},{header:o((()=>[s("div",R,[s("span",G,m("create"===oe.value?"添加":"修改"),1),s("div",null,[i(I,{type:"primary",onClick:ce},{default:o((()=>[n("确 定")])),_:1}),i(I,{onClick:pe},{default:o((()=>[n("取 消")])),_:1})])])])),default:o((()=>[i(J,{model:L.value,"label-position":"top",ref_key:"elFormRef",ref:Y,rules:M,"label-width":"80px"},{default:o((()=>[i(z,{label:"地址:",prop:"agent_addr"},{default:o((()=>[i(ge,{modelValue:L.value.agent_addr,"onUpdate:modelValue":a[4]||(a[4]=e=>L.value.agent_addr=e),clearable:!0,placeholder:"请输入地址"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{J as default};
