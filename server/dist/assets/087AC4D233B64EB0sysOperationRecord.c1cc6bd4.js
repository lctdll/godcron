/*! 
 Build based on gin-vue-admin 
 Time : 1718874130000 */
import{C as e,aB as t,x as a,F as l,y as o,a as r,G as s,aK as i,o as n,h as p,w as d,c as u,n as c,t as f,e as v,B as m,g as b,bo as B,K as g,dH as h,L as y,v as w,ad as C,b as A,d as E,at as j,au as _,j as D,l as x,E as k,J as S}from"./087AC4D233B64EB0index.f7794d3b.js";import{E as O}from"./087AC4D233B64EB0pagination.4f4dab9f.js";/* empty css                              *//* empty css                            */import"./087AC4D233B64EB0select.ac4ece9f.js";import"./087AC4D233B64EB0scrollbar.5ea68434.js";/* empty css                               */import{E as R,a as V}from"./087AC4D233B64EB0table-column.ebf38335.js";import"./087AC4D233B64EB0checkbox.689d67cf.js";/* empty css                                *//* empty css                                */import{a as z,E as N}from"./087AC4D233B64EB0form-item.2294f669.js";/* empty css                               */import{E as U}from"./087AC4D233B64EB0index.18ebb74e.js";import{b as I,u as T,E as $}from"./087AC4D233B64EB0index.180a68c4.js";import{d as F}from"./087AC4D233B64EB0dropdown.c032c9eb.js";import"./087AC4D233B64EB0isEqual.e4d5ab49.js";import"./087AC4D233B64EB0_Uint8Array.a14e9c36.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.13f65845.js";import"./087AC4D233B64EB0debounce.9b1e718d.js";import"./087AC4D233B64EB0_baseIteratee.ecc9a1d9.js";import"./087AC4D233B64EB0index.21f2f826.js";import"./087AC4D233B64EB0castArray.b2df96d4.js";import"./087AC4D233B64EB0_initCloneObject.6c0ecbc8.js";import"./087AC4D233B64EB0_baseClone.3d27a61c.js";const H=e({trigger:I.trigger,placement:F.placement,disabled:I.disabled,visible:T.visible,transition:T.transition,popperOptions:F.popperOptions,tabindex:F.tabindex,content:T.content,popperStyle:T.popperStyle,popperClass:T.popperClass,enterable:{...T.enterable,default:!0},effect:{...T.effect,default:"light"},teleported:T.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),J={"update:visible":e=>t(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},K=a({name:"ElPopover"}),L=a({...K,props:H,emits:J,setup(e,{expose:t,emit:a}){const g=e,h=l((()=>g["onUpdate:visible"])),y=o("popover"),w=r(),C=l((()=>{var e;return null==(e=s(w))?void 0:e.popperRef})),A=l((()=>[{width:i(g.width)},g.popperStyle])),E=l((()=>[y.b(),g.popperClass,{[y.m("plain")]:!!g.content}])),j=l((()=>g.transition==="".concat(y.namespace.value,"-fade-in-linear"))),_=()=>{a("before-enter")},D=()=>{a("before-leave")},x=()=>{a("after-enter")},k=()=>{a("update:visible",!1),a("after-leave")};return t({popperRef:C,hide:()=>{var e;null==(e=w.value)||e.hide()}}),(e,t)=>(n(),p(s($),B({ref_key:"tooltipRef",ref:w},e.$attrs,{trigger:e.trigger,placement:e.placement,disabled:e.disabled,visible:e.visible,transition:e.transition,"popper-options":e.popperOptions,tabindex:e.tabindex,content:e.content,offset:e.offset,"show-after":e.showAfter,"hide-after":e.hideAfter,"auto-close":e.autoClose,"show-arrow":e.showArrow,"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":s(E),"popper-style":s(A),teleported:e.teleported,persistent:e.persistent,"gpu-acceleration":s(j),"onUpdate:visible":s(h),onBeforeShow:_,onBeforeHide:D,onShow:x,onHide:k}),{content:d((()=>[e.title?(n(),u("div",{key:0,class:c(s(y).e("title")),role:"title"},f(e.title),3)):v("v-if",!0),m(e.$slots,"default",{},(()=>[b(f(e.content),1)]))])),default:d((()=>[e.$slots.reference?m(e.$slots,"reference",{key:0}):v("v-if",!0)])),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});const P=(e,t)=>{const a=t.arg||t.value,l=null==a?void 0:a.popperRef;l&&(l.triggerRef=e)};const q=y(g(L,[["__file","popover.vue"]]),{directive:h({mounted(e,t){P(e,t)},updated(e,t){P(e,t)}},"popover")}),G={class:"gva-search-box"},W={class:"gva-table-box"},M={class:"gva-btn-list"},Q={class:"popover-box"},X={key:1},Y={class:"popover-box"},Z={key:1},ee={class:"gva-pagination"},te=Object.assign({name:"SysOperationRecord"},{__name:"sysOperationRecord",setup(e){const t=r(1),a=r(0),l=r(10),o=r([]),i=r({}),c=()=>{i.value={}},v=()=>{t.value=1,l.value=10,""===i.value.status&&(i.value.status=null),g()},m=e=>{l.value=e,g()},B=e=>{t.value=e,g()},g=async()=>{const e=await(r={page:t.value,pageSize:l.value,...i.value},w({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:r}));var r;0===e.code&&(o.value=e.data.list,a.value=e.data.total,t.value=e.data.page,l.value=e.data.pageSize)};g();const h=r([]),y=e=>{h.value=e},I=async()=>{_.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=[];h.value&&h.value.forEach((t=>{e.push(t.ID)}));var a;0===(await(a={ids:e},w({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:a}))).code&&(D({type:"success",message:"删除成功"}),o.value.length===e.length&&t.value>1&&t.value--,g())}))},T=async e=>{_.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{var a;0===(await(a={ID:e.ID},w({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:a}))).code&&(D({type:"success",message:"删除成功"}),1===o.value.length&&t.value>1&&t.value--,g())}))},$=e=>{try{return JSON.parse(e)}catch(t){return e}};return(e,r)=>{const g=x,w=z,_=k,D=N,F=R,H=U,J=C("warning"),K=S,L=q,P=V,te=O;return n(),u("div",null,[A("div",G,[E(D,{inline:!0,model:i.value},{default:d((()=>[E(w,{label:"请求方法"},{default:d((()=>[E(g,{modelValue:i.value.method,"onUpdate:modelValue":r[0]||(r[0]=e=>i.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),E(w,{label:"请求路径"},{default:d((()=>[E(g,{modelValue:i.value.path,"onUpdate:modelValue":r[1]||(r[1]=e=>i.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),E(w,{label:"结果状态码"},{default:d((()=>[E(g,{modelValue:i.value.status,"onUpdate:modelValue":r[2]||(r[2]=e=>i.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),E(w,null,{default:d((()=>[E(_,{type:"primary",icon:"search",onClick:v},{default:d((()=>[b("查询")])),_:1}),E(_,{icon:"refresh",onClick:c},{default:d((()=>[b("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),A("div",W,[A("div",M,[E(_,{icon:"delete",disabled:!h.value.length,onClick:I},{default:d((()=>[b("删除")])),_:1},8,["disabled"])]),E(P,{ref:"multipleTable",data:o.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:y},{default:d((()=>[E(F,{align:"left",type:"selection",width:"55"}),E(F,{align:"left",label:"操作人",width:"140"},{default:d((e=>[A("div",null,f(e.row.user.userName)+"("+f(e.row.user.nickName)+")",1)])),_:1}),E(F,{align:"left",label:"日期",width:"180"},{default:d((e=>[b(f(s(j)(e.row.CreatedAt)),1)])),_:1}),E(F,{align:"left",label:"状态码",prop:"status",width:"120"},{default:d((e=>[A("div",null,[E(H,{type:"success"},{default:d((()=>[b(f(e.row.status),1)])),_:2},1024)])])),_:1}),E(F,{align:"left",label:"请求IP",prop:"ip",width:"120"}),E(F,{align:"left",label:"请求方法",prop:"method",width:"120"}),E(F,{align:"left",label:"请求路径",prop:"path",width:"240"}),E(F,{align:"left",label:"请求",prop:"path",width:"80"},{default:d((e=>[A("div",null,[e.row.body?(n(),p(L,{key:0,placement:"left-start"},{reference:d((()=>[E(K,{style:{cursor:"pointer"}},{default:d((()=>[E(J)])),_:1})])),default:d((()=>[A("div",Q,[A("pre",null,f($(e.row.body)),1)])])),_:2},1024)):(n(),u("span",X,"无"))])])),_:1}),E(F,{align:"left",label:"响应",prop:"path",width:"80"},{default:d((e=>[A("div",null,[e.row.resp?(n(),p(L,{key:0,placement:"left-start"},{reference:d((()=>[E(K,{style:{cursor:"pointer"}},{default:d((()=>[E(J)])),_:1})])),default:d((()=>[A("div",Y,[A("pre",null,f($(e.row.resp)),1)])])),_:2},1024)):(n(),u("span",Z,"无"))])])),_:1}),E(F,{align:"left",label:"操作"},{default:d((e=>[E(_,{icon:"delete",type:"primary",link:"",onClick:t=>T(e.row)},{default:d((()=>[b("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),A("div",ee,[E(te,{"current-page":t.value,"page-size":l.value,"page-sizes":[10,30,50,100],total:a.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:B,onSizeChange:m},null,8,["current-page","page-size","total"])])])])}}});export{te as default};
