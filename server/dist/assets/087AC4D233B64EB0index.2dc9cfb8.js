/*! 
 Build based on gin-vue-admin 
 Time : 1718874130000 */
import{C as e,ab as t,x as n,F as a,U as o,a as r,V as s,T as i,X as l,b7 as u,o as c,c as d,B as m,H as p,K as v,L as f,ae as B,be as g,af as x,r as A,ah as h,u as E,cP as b,av as C,cU as j,m as y,aj as D,ad as w,G as k,h as M,e as I,d as L,b as _,n as S,w as T,a6 as z,aw as N,I as R}from"./087AC4D233B64EB0index.f7794d3b.js";import P from"./087AC4D233B64EB0index.e18377a2.js";import W from"./087AC4D233B64EB0index.ee97e0da.js";import{u as F}from"./087AC4D233B64EB0index.356d0ab3.js";import O from"./087AC4D233B64EB0index.4fefe7e3.js";import{_ as U}from"./087AC4D233B64EB0bottomInfo.99767df6.js";import"./087AC4D233B64EB0normalMode.32579627.js";/* empty css                             *//* empty css                                *//* empty css                               */import"./087AC4D233B64EB0index.09b49e80.js";import"./087AC4D233B64EB0menuItem.9b57283e.js";import"./087AC4D233B64EB0index.37515e08.js";import"./087AC4D233B64EB0index.9bb18579.js";import"./087AC4D233B64EB0index.180a68c4.js";import"./087AC4D233B64EB0index.21f2f826.js";import"./087AC4D233B64EB0asyncSubmenu.6d0b7a8d.js";import"./087AC4D233B64EB0headMode.922802dd.js";/* empty css                               */import"./087AC4D233B64EB0scrollbar.5ea68434.js";import"./087AC4D233B64EB0tools.92f0706c.js";import"./087AC4D233B64EB0index.07cd994e.js";import"./087AC4D233B64EB0drawer.178042b4.js";import"./087AC4D233B64EB0overlay.ee491930.js";/* empty css                            *//* empty css                              */import"./087AC4D233B64EB0input-number.d6620c63.js";import"./087AC4D233B64EB0index.50b81e49.js";import"./087AC4D233B64EB0switch.060d4277.js";import"./087AC4D233B64EB0position.541e0bb6.js";import"./087AC4D233B64EB0debounce.9b1e718d.js";import"./087AC4D233B64EB0index.18ebb74e.js";import"./087AC4D233B64EB0dialog.eb147687.js";import"./087AC4D233B64EB0index.2e780ed3.js";import"./087AC4D233B64EB0image-viewer.37983d33.js";import"./087AC4D233B64EB0dropdown.c032c9eb.js";import"./087AC4D233B64EB0castArray.b2df96d4.js";import"./087AC4D233B64EB0tab-pane.03f159a3.js";import"./087AC4D233B64EB0strings.13f65845.js";import"./087AC4D233B64EB0index.7226ef52.js";const G=e({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:t([String,Array]),default:"Element Plus"},font:{type:t(Object)},gap:{type:t(Array),default:()=>[100,100]},offset:{type:t(Array)}});function H(e,t,n=1){const a=document.createElement("canvas"),o=a.getContext("2d"),r=e*n,s=t*n;return a.setAttribute("width","".concat(r,"px")),a.setAttribute("height","".concat(s,"px")),o.save(),[o,a,r,s]}function V(){return function(e,t,n,a,o,r,s,i){const[l,u,c,d]=H(a,o,n);if(e instanceof HTMLImageElement)l.drawImage(e,0,0,c,d);else{const{color:t,fontSize:a,fontStyle:s,fontWeight:i,fontFamily:u,textAlign:d,textBaseline:m}=r,p=Number(a)*n;l.font="".concat(s," normal ").concat(i," ").concat(p,"px/").concat(o,"px ").concat(u),l.fillStyle=t,l.textAlign=d,l.textBaseline=m;const v=Array.isArray(e)?e:[e];null==v||v.forEach(((e,t)=>{l.fillText(null!=e?e:"",c/2,t*(p+3*n))}))}const m=Math.PI/180*Number(t),p=Math.max(a,o),[v,f,B]=H(p,p,n);v.translate(B/2,B/2),v.rotate(m),c>0&&d>0&&v.drawImage(u,-c/2,-d/2);let g=0,x=0,A=0,h=0;const E=c/2,b=d/2;[[0-E,0-b],[0+E,0-b],[0+E,0+b],[0-E,0+b]].forEach((([e,t])=>{const[n,a]=function(e,t){return[e*Math.cos(m)-t*Math.sin(m),e*Math.sin(m)+t*Math.cos(m)]}(e,t);g=Math.min(g,n),x=Math.max(x,n),A=Math.min(A,a),h=Math.max(h,a)}));const C=g+B/2,j=A+B/2,y=x-g,D=h-A,w=s*n,k=i*n,M=2*(y+w),I=D+k,[L,_]=H(M,I);function S(e=0,t=0){L.drawImage(f,C,j,y,D,e,t,y,D)}return S(),S(y+w,-D/2-k/2),S(y+w,+D/2+k/2),[_.toDataURL(),M/n,I/n]}}const X=n({name:"ElWatermark"});const Z=f(v(n({...X,props:G,setup(e){const t=e,n={position:"relative"},v=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.color)?n:"rgba(0,0,0,.15)"})),f=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontSize)?n:16})),B=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontWeight)?n:"normal"})),g=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontStyle)?n:"normal"})),x=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontFamily)?n:"sans-serif"})),A=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.textAlign)?n:"center"})),h=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.textBaseline)?n:"hanging"})),E=a((()=>t.gap[0])),b=a((()=>t.gap[1])),C=a((()=>E.value/2)),j=a((()=>b.value/2)),y=a((()=>{var e,n;return null!=(n=null==(e=t.offset)?void 0:e[0])?n:C.value})),D=a((()=>{var e,n;return null!=(n=null==(e=t.offset)?void 0:e[1])?n:j.value})),w=()=>{const e={zIndex:t.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let n=y.value-C.value,a=D.value-j.value;return n>0&&(e.left="".concat(n,"px"),e.width="calc(100% - ".concat(n,"px)"),n=0),a>0&&(e.top="".concat(a,"px"),e.height="calc(100% - ".concat(a,"px)"),a=0),e.backgroundPosition="".concat(n,"px ").concat(a,"px"),e},k=o(null),M=o(),I=r(!1),L=()=>{M.value&&(M.value.remove(),M.value=void 0)},_=(e,t)=>{var n;k.value&&M.value&&(I.value=!0,M.value.setAttribute("style",function(e){return Object.keys(e).map((t=>"".concat(function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}(t),": ").concat(e[t],";"))).join(" ")}({...w(),backgroundImage:"url('".concat(e,"')"),backgroundSize:"".concat(Math.floor(t),"px")})),null==(n=k.value)||n.append(M.value),setTimeout((()=>{I.value=!1})))},S=V(),T=()=>{const e=document.createElement("canvas").getContext("2d"),n=t.image,a=t.content,o=t.rotate;if(e){M.value||(M.value=document.createElement("div"));const r=window.devicePixelRatio||1,[s,i]=(e=>{let n=120,a=64;const o=t.image,r=t.content,s=t.width,i=t.height;if(!o&&e.measureText){e.font="".concat(Number(f.value),"px ").concat(x.value);const t=Array.isArray(r)?r:[r],o=t.map((t=>{const n=e.measureText(t);return[n.width,void 0!==n.fontBoundingBoxAscent?n.fontBoundingBoxAscent+n.fontBoundingBoxDescent:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent]}));n=Math.ceil(Math.max(...o.map((e=>e[0])))),a=Math.ceil(Math.max(...o.map((e=>e[1]))))*t.length+3*(t.length-1)}return[null!=s?s:n,null!=i?i:a]})(e),l=e=>{const[t,n]=S(e||"",o,r,s,i,{color:v.value,fontSize:f.value,fontStyle:g.value,fontWeight:B.value,fontFamily:x.value,textAlign:A.value,textBaseline:h.value},E.value,b.value);_(t,n)};if(n){const e=new Image;e.onload=()=>{l(e)},e.onerror=()=>{l(a)},e.crossOrigin="anonymous",e.referrerPolicy="no-referrer",e.src=n}else l(a)}};s((()=>{T()})),i((()=>t),(()=>{T()}),{deep:!0,flush:"post"}),l((()=>{L()}));return u(k,(e=>{I.value||e.forEach((e=>{((e,t)=>{let n=!1;return e.removedNodes.length&&t&&(n=Array.from(e.removedNodes).includes(t)),"attributes"===e.type&&e.target===t&&(n=!0),n})(e,M.value)&&(L(),T())}))}),{attributes:!0,subtree:!0,childList:!0}),(e,t)=>(c(),d("div",{ref_key:"containerRef",ref:k,style:p([n])},[m(e.$slots,"default")],4))}}),[["__file","watermark.vue"]]));const $=992;function q(e){const t=B();const n=F((function(){if(!document.hidden){const e=document.body.getBoundingClientRect().width-1<$;t.toggleDevice(e?"mobile":"desktop")}}),100);s((()=>{e&&n()})),g((()=>{!function(e,t,n,a=!1){e.addEventListener&&"function"==typeof e.addEventListener&&e.addEventListener(t,n,a)}(window,"resize",n)})),l((()=>{!function(e,t,n,a=!1){e.removeEventListener&&"function"==typeof e.removeEventListener&&e.removeEventListener(t,n,a)}(window,"resize",n)}))}const K={class:"bg-gray-50 text-slate-700 dark:text-slate-500 dark:bg-slate-800 w-screen h-screen"},Y={class:"flex flex-row w-full gva-container pt-16"},J={class:"flex-1 p-2 w-0 h-full"},Q={id:"gva-base-load-dom",class:"gva-body-h bg-gray-50 dark:bg-slate-800"},ee=Object.assign({name:"GvaLayout"},{__name:"index",setup(e){const t=B(),{config:n,theme:a,device:o}=x(t);q(!0);const i=A({color:"rgba(0, 0, 0, .15)"});h((()=>{i.color="dark"===a.value?"rgba(255,255,255, .15)":"rgba(0, 0, 0, .15)"}));const l=E(),u=b(),m=C();s((()=>{j.on("reload",g),p.loadingInstance&&p.loadingInstance.close()}));const p=y(),v=r(!0);let f=null;const g=async()=>{f&&window.clearTimeout(f),f=window.setTimeout((async()=>{if(u.meta.keepAlive)v.value=!1,await D(),v.value=!0;else{const e=u.meta.title;l.push({name:"Reload",params:{title:e}})}}),400)};return(e,t)=>{const a=Z,r=w("router-view");return c(),d("div",K,[k(n).show_watermark?(c(),M(a,{key:0,font:i,"z-index":9999,gap:[180,150],class:"absolute inset-0 pointer-events-none",content:k(p).userInfo.nickName},null,8,["font","content"])):I("",!0),L(W),_("div",Y,["head"!=k(n).side_mode||"mobile"===k(o)&&"head"==k(n).side_mode?(c(),M(P,{key:0})):I("",!0),_("div",J,[k(n).showTabs?(c(),M(O,{key:0})):I("",!0),_("div",{class:S(["overflow-auto",k(n).showTabs?"gva-container2":"gva-container pt-1"])},[v.value?(c(),M(r,{key:0},{default:T((({Component:e})=>[_("div",Q,[L(z,{mode:"out-in",name:"el-fade-in-linear"},{default:T((()=>[(c(),M(N,{include:k(m).keepAliveRouters},[(c(),M(R(e)))],1032,["include"]))])),_:2},1024)])])),_:1})):I("",!0),L(U)],2)])])])}}});export{ee as default};
